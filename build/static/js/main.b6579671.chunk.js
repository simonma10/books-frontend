(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(51)},47:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(23),r=a.n(o),s=a(11),i=a(12),c=a(3),d=a.n(c),m=a(9),u=a(4),h=a(5),p=a(7),g=a(6),b=a(1),v=a(8),k=a(10),E=a.n(k);a(47);var f=function(e){var t="none"===e.activeItem?"fas fa-filter mr-1":"fas fa-filter mr-1 text-warning";return l.a.createElement("div",{className:"dropdown"},l.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l.a.createElement("span",null,l.a.createElement("i",{className:t}),e.buttonText)),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return e.map(function(e,n){return l.a.createElement("div",{className:e.value===t?"dropdown-item active":"dropdown-item",key:n,"data-value":e.value,onClick:function(e){a(e.target.getAttribute("data-value"))}},e.name)})}(e.items,e.activeItem,e.changeHandler)))};a(48).config();var y=Object({NODE_ENV:"production",PUBLIC_URL:""}).API_HOST,N={modalName:"bookEditModal",baseUrl:y+"/api/v1/books",searchUrl:y+"/api/v1/external/google/volumes",routesUrl:y+"/routes",loginUrl:y+"/login",statusOptions:[{name:"None",value:"none"},{name:"Wishlist",value:"wishlist"},{name:"On Order",value:"onOrder"},{name:"Purchased",value:"purchased"},{name:"Reading",value:"reading"},{name:"Read",value:"read"}],priorityOptions:[{name:"None",value:"none"},{name:"0",value:0},{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5}]},S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).handleSearchChange=a.handleSearchChange.bind(Object(b.a)(a)),a.handleSearchClick=a.handleSearchClick.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.handleStatusFilterChange=a.handleStatusFilterChange.bind(Object(b.a)(a)),a.handlePriorityFilterChange=a.handlePriorityFilterChange.bind(Object(b.a)(a)),a.handleLogout=a.handleLogout.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleSearchChange",value:function(e){var t=e.target.value;this.props.handleSearchChange(t)}},{key:"handleSearchClick",value:function(){this.props.handleSearchClick()}},{key:"handleSubmit",value:function(e){this.props.handleSearchClick(),e.preventDefault()}},{key:"handlePriorityFilterChange",value:function(e){this.props.handlePriorityFilterChange(e)}},{key:"handleStatusFilterChange",value:function(e){this.props.handleStatusFilterChange(e)}},{key:"handleLogout",value:function(){this.props.handleLogout()}},{key:"render",value:function(){var e=this.props.user.username||"";return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("span",{className:"navbar-brand mb-0 h1"},l.a.createElement("i",{className:"fas fa-book"})," Funky Books"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"ml-2 mr-2"},""===e?l.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm","data-toggle":"modal","data-target":".login-modal"},"Login"):l.a.createElement("div",null,l.a.createElement("span",{className:"mr-1"},e),l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:this.handleLogout},"Logout")," ")),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{className:"navbar-nav mr-auto"}),l.a.createElement("div",{className:"mr-1"},l.a.createElement(f,{items:N.statusOptions,activeItem:this.props.statusFilter,buttonText:"Status",changeHandler:this.handleStatusFilterChange})),l.a.createElement("div",{className:"mr-1"},l.a.createElement(f,{items:N.priorityOptions,activeItem:this.props.priorityFilter,buttonText:"Stars",changeHandler:this.handlePriorityFilterChange})),l.a.createElement("form",{className:"form-inline my-2 my-lg-0",onSubmit:this.handleSubmit},l.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",value:this.props.searchTerm,onChange:this.handleSearchChange}),l.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"button",onClick:this.handleSearchClick},"Search"))))}}]),t}(n.Component),C=l.a.createElement("i",{className:"far fa-star"}),B=l.a.createElement("i",{className:"fas fa-star"});var w=function(e){var t=function(e,t){for(var a=[],n=1;n<t+1;n++)n<=e?a.push(1):a.push(0);return a}(e.priority,5);return l.a.createElement("div",{className:"row text-warning"},t.map(function(e,t){return 1===e?l.a.createElement("span",{key:t},B):l.a.createElement("span",{key:t},C)}))};var O=function(e){var t=e.book,a="http://books.google.com/books/content?id=";t.googleBooksId&&""!==t.googleBooksId?a+=t.googleBooksId:a+="ZlU3DwAAQBAJ",a+="&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api";var n="";return t.snippet&&(n=(n=t.snippet.replace(/&quot;/g,'"')).replace(/&#39;/g,"'")),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("div",{className:"media"},l.a.createElement("img",{src:a,className:"mr-2 bl-thumb",alt:"book cover"}),l.a.createElement("div",{className:"media-body"},l.a.createElement("div",{className:"container-fluid row"},l.a.createElement("div",{className:"col-3"},l.a.createElement("h5",{className:"mt-0"},t.title||"loading"," "),l.a.createElement("div",{className:"d-flex flex-row justify-content-between"},l.a.createElement("div",null,t.author,"   ",l.a.createElement("span",null,t.year?l.a.createElement("span",null,"(",t.year,")"):l.a.createElement("span",null))))),l.a.createElement("div",{className:"col-6"},l.a.createElement("p",null,l.a.createElement("small",null,n))),l.a.createElement("div",{className:"col-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"mr-1 mb-4"},l.a.createElement("select",{value:t.status||"",onChange:function(a){e.selectHandler(a,t._id)}},l.a.createElement("option",{value:"wishlist"},"Wishlist"),l.a.createElement("option",{value:"onOrder"},"On Order"),l.a.createElement("option",{value:"purchased"},"Purchased"),l.a.createElement("option",{value:"reading"},"Reading"),l.a.createElement("option",{value:"read"},"Read"))),l.a.createElement("div",{className:"mr-1 ml-3"},l.a.createElement(w,{priority:t.priority}))),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"mr-1 ml-3 mb-3"},l.a.createElement("span",{"data-toggle":"tooltip","data-placement":"top",title:"edit book"},l.a.createElement("span",{style:{fontSize:"1.2em"},className:"mr-3 text-primary","data-toggle":"modal","data-target":"#"+N.modalName,onClick:function(){e.clickHandler(t._id)}},l.a.createElement("i",{className:"fas fa-edit"}))),l.a.createElement("span",{"data-toggle":"tooltip","data-placement":"top",title:"delete book"},l.a.createElement("span",{style:{fontSize:"1.2em"},className:"text-danger","data-toggle":"modal","data-target":".yes-no-modal",onClick:function(){e.clickHandler(t._id)}},l.a.createElement("i",{className:"fas fa-trash-alt"})))),l.a.createElement("div",{className:""},l.a.createElement("button",{type:"button",className:"btn btn-link","data-toggle":"collapse","data-target":"#collapse"+t._id},l.a.createElement("small",null,"details...")))))))))),l.a.createElement("div",{className:"collapse",id:"collapse"+t._id,"data-parent":"#accordionList"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",null,t.title,t.subtitle?l.a.createElement("span",null,": ",l.a.createElement("small",null,t.subtitle)):l.a.createElement("span",null)),l.a.createElement("div",null,l.a.createElement("p",null,t.description),l.a.createElement("div",{className:"row"}),l.a.createElement("div",null,t.categories?l.a.createElement("span",null,t.categories.join()):l.a.createElement("span",null)),l.a.createElement("div",null,t.pages?l.a.createElement("span",null,t.pages,"pp"):l.a.createElement("span",null)),l.a.createElement("div",null,t.publisher?l.a.createElement("span",null,t.publisher):l.a.createElement("span",null)),l.a.createElement("span",null,t.isbn13?l.a.createElement("span",null,"ISBN: ",t.isbn13):l.a.createElement("span",null))))))},j=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"renderBookListItems",value:function(){var e=this;if(this.props.books)return this.props.books.map(function(t){return[l.a.createElement(O,{book:t,key:t._id,clickHandler:e.props.clickHandler,selectHandler:e.props.selectHandler})]})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-10"},l.a.createElement("div",{className:"accordion",id:"accordionList"},this.renderBookListItems()),l.a.createElement("div",{className:"d-flex justify-content-end"},l.a.createElement("div",{className:"mr-2"},l.a.createElement("span",{"data-toggle":"tooltip","data-placement":"top",title:"new book"},l.a.createElement("span",{className:"mr-3 text-success","data-toggle":"modal","data-target":"#"+N.modalName,onClick:function(){e.props.newHandler()}},l.a.createElement("span",{style:{fontSize:"1.2em"}},l.a.createElement("i",{className:"far fa-plus-square"})),l.a.createElement("span",{className:"ml-2"},"Add")))))))}}]),t}(n.Component);var L=function(e){return l.a.createElement("div",null,e.books.length>0?l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Title"),l.a.createElement("th",{scope:"col"},"Subtitle"),l.a.createElement("th",{scope:"col"},"Author(s)"),l.a.createElement("th",null,"?"))),l.a.createElement("tbody",null,e.books.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("th",{scope:"row"},l.a.createElement("small",null,t.title)),l.a.createElement("td",null,l.a.createElement("small",null,t.subtitle)),l.a.createElement("td",null,l.a.createElement("small",null,t.authors?t.authors.join():"")),l.a.createElement("td",null,l.a.createElement("span",{className:"text-secondary",onClick:function(){e.handleGoogleBookSelect(t.googleBooksId)}},l.a.createElement("i",{className:"fas fa-arrow-circle-right"}))))}))):l.a.createElement("span",null,"..."))},x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSave=a.handleSave.bind(Object(b.a)(a)),a.handleGoogleLookup=a.handleGoogleLookup.bind(Object(b.a)(a)),a.handleGoogleBookSelect=a.handleGoogleBookSelect.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.props.handleChange(t,a)}},{key:"handleSave",value:function(){this.props.handleSave()}},{key:"handleGoogleLookup",value:function(){this.props.handleGoogleLookup()}},{key:"handleGoogleBookSelect",value:function(e){this.props.handleGoogleBookSelect(e)}},{key:"render",value:function(){var e=this.props.book,t="Edit Book";return"new"===this.props.mode&&(t="New Book"),l.a.createElement("div",{className:"modal fade",id:N.modalName,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-xl",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",null,l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},t),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"form-group col"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("label",{htmlFor:"bookTitle"},l.a.createElement("span",{id:"titleHelp",className:"input-group-text"},"Book Title"))),l.a.createElement("input",{type:"text",className:"form-control",id:"bookTitle","aria-describedby":"titleHelp",placeholder:"Book Title",name:"title",value:e.title,onChange:this.handleChange}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("button",{type:"button",className:"btn btn-primary mb-3",onClick:this.handleGoogleLookup},"Google")))),l.a.createElement("div",{className:"form-group col"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("label",{htmlFor:"bookAuthor"},l.a.createElement("small",{id:"authorHelp",className:"input-group-text"},"Author"))),l.a.createElement("input",{type:"text",className:"form-control",id:"bookAuthor","aria-describedby":"authorHelp",placeholder:"Author",name:"author",value:e.author,onChange:this.handleChange})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"form-group col"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("label",{htmlFor:"bookStatus"}," ",l.a.createElement("small",{id:"statusHelp",className:"input-group-text"},"Status"))),l.a.createElement("input",{type:"text",className:"form-control",id:"bookStatus","aria-describedby":"statusHelp",placeholder:"Status",name:"status",value:e.status,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group col"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("label",{htmlFor:"bookYear"}," ",l.a.createElement("small",{id:"yearHelp",className:"input-group-text"},"First published"))),l.a.createElement("input",{type:"text",className:"form-control",id:"bookYear","aria-describedby":"yearHelp",placeholder:"Year",name:"year",value:e.year,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group col"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("label",{htmlFor:"bookPriority"}," ",l.a.createElement("small",{id:"priorityHelp",className:"input-group-text"},"Priority"))),l.a.createElement("input",{type:"text",className:"form-control",id:"bookPriority","aria-describedby":"priorityHelp",placeholder:"Priority",name:"priority",value:e.priority,onChange:this.handleChange})))),l.a.createElement("div",null,l.a.createElement(L,{books:this.props.googleBooksData,handleGoogleBookSelect:this.handleGoogleBookSelect}))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),l.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.handleSave},"Save changes"))))))}}]),t}(n.Component);var F=function(e){return l.a.createElement("div",{className:"modal fade yes-no-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"mySmallModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-body"},l.a.createElement("span",null,e.msg)),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),l.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:e.handleOkClick},"OK")))))};var I=function(e){return l.a.createElement("div",{className:"modal fade login-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"mySmallModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",null,l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",null,"Login")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputUsername"},"Username"),l.a.createElement("input",{type:"text",className:"form-control",id:"inputUsername","aria-describedby":"usernameHelp",placeholder:"Enter username",value:e.login.username,name:"username",onChange:function(t){e.handleChange(t.target.name,t.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputPassword"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword",placeholder:"",value:e.login.password,name:"password",onChange:function(t){e.handleChange(t.target.name,t.target.value)}}))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),l.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:e.handleSubmit},"Submit"))))))},A=function(e){function t(){var e;Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).state={books:[],booksCache:[],activeBook:{_id:"",title:"",author:"",year:0,status:"none",priority:0,googleBooksId:"",userid:""},modalMode:"edit",searchTerm:"",yesNoModal:{text:"Do you really want to delete "},googleBooksData:{},statusFilter:"none",priorityFilter:"none",user:{_id:"",username:"",email:"",role:"",authdata:""},login:{username:"",password:""}},e.handleListItemClick=e.handleListItemClick.bind(Object(b.a)(e)),e.handleEditModalChange=e.handleEditModalChange.bind(Object(b.a)(e)),e.handleEditModalSave=e.handleEditModalSave.bind(Object(b.a)(e)),e.handleSearchClick=e.handleSearchClick.bind(Object(b.a)(e)),e.handleSearchChange=e.handleSearchChange.bind(Object(b.a)(e)),e.deleteActiveBook=e.deleteActiveBook.bind(Object(b.a)(e)),e.handleNewClick=e.handleNewClick.bind(Object(b.a)(e)),e.handleGoogleLookup=e.handleGoogleLookup.bind(Object(b.a)(e)),e.handleGoogleBookSelect=e.handleGoogleBookSelect.bind(Object(b.a)(e)),e.handleSelectChange=e.handleSelectChange.bind(Object(b.a)(e)),e.handleStatusFilterChange=e.handleStatusFilterChange.bind(Object(b.a)(e)),e.handlePriorityFilterChange=e.handlePriorityFilterChange.bind(Object(b.a)(e)),e.handleLoginChange=e.handleLoginChange.bind(Object(b.a)(e)),e.handleLoginSubmit=e.handleLoginSubmit.bind(Object(b.a)(e)),e.handleLogout=e.handleLogout.bind(Object(b.a)(e));var a=JSON.parse(localStorage.getItem("user"));return a&&(e.state.user=a),e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getBookList(),window.$(function(){window.$('[data-toggle="tooltip"]').tooltip(),window.$('[data-toggle="popover"]').popover(),window.$(".toast").toast()})}},{key:"setActiveBook",value:function(e){var t=this.state.books.filter(function(t){return t._id===e});this.setState({activeBook:t[0],modalMode:"edit"})}},{key:"getBookList",value:function(){var e=Object(m.a)(d.a.mark(function e(){var t,a,n,l,o=this,r=arguments;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=""===t?"":"?title="+t,n=N.baseUrl+a,e.next=5,this.getAuth();case 5:l=e.sent,E.a.get(n,l).then(function(e){o.setState({books:e.data,booksCache:e.data})}).catch(function(e){console.log(e),o.setState({error:!0})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"filterBookList",value:function(e,t){var a=[];"status"===e?"none"===t?(a=this.state.booksCache,this.setState({priorityFilter:"none"})):a=this.state.booksCache.filter(function(e){return e.status===t}):"priority"===e&&("none"===t?(a=this.state.booksCache,this.setState({statusFilter:"none"})):a=this.state.booksCache.filter(function(e){return e.priority===parseInt(t)})),a!==[]&&this.setState({books:a})}},{key:"createBook",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var a,n,l=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.baseUrl,e.next=3,this.getAuth();case 3:n=e.sent,E.a.post(a,t,n).then(function(e){200===e.status&&(console.log(t.title,"created successfully"),l.getBookList())}).catch(function(e){l.setState({error:!0})});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBook",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var a,n,l=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.baseUrl+"?id="+t,e.next=3,this.getAuth();case 3:n=e.sent,E.a.delete(a,n).then(function(e){200===e.status&&(console.log("deleted successfully"),l.getBookList())}).catch(function(e){l.setState({error:!0})});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateBook",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var a,n,l=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.baseUrl,e.next=3,this.getAuth();case 3:n=e.sent,E.a.patch(a,t,n).then(function(e){200===e.status&&(console.log(t.title,"updated successfully"),l.getBookList())}).catch(function(e){l.setState({error:!0})});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getGoogleBooksData",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var a,n,l=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.searchUrl+"?q="+t,e.next=3,this.getAuth();case 3:n=e.sent,E.a.get(a,n).then(function(e){l.setState({googleBooksData:e.data})}).catch(function(e){l.setState({error:!0})});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditModalChange",value:function(e,t){this.setState({activeBook:Object(i.a)({},this.state.activeBook,Object(s.a)({},e,t))})}},{key:"handleEditModalSave",value:function(){"new"===this.state.modalMode?this.createBook(this.state.activeBook):this.updateBook(this.state.activeBook)}},{key:"handleListItemClick",value:function(e){this.setActiveBook(e)}},{key:"handleSearchChange",value:function(e){this.setState({searchTerm:e}),""===e&&this.getBookList()}},{key:"handleSearchClick",value:function(e){this.getBookList(this.state.searchTerm)}},{key:"deleteActiveBook",value:function(){console.log("delete ",this.state.activeBook._id),this.deleteBook(this.state.activeBook._id)}},{key:"handleNewClick",value:function(){this.setState({modalMode:"new",activeBook:{id:"",title:"",author:"",year:0,status:"",priority:0,userid:this.state.user._id},googleBooksData:{}})}},{key:"handleGoogleLookup",value:function(){this.getGoogleBooksData(this.state.activeBook.title)}},{key:"handleGoogleBookSelect",value:function(e){var t=this.state.googleBooksData.filter(function(t){return t.googleBooksId===e})[0],a=t.authors.join();this.setState({activeBook:Object(i.a)({},this.state.activeBook,{googleBooksId:e,title:t.title,author:a,categories:t.categories,description:t.description,isbn10:t.isbn10,isbn13:t.isbn13,pages:t.pages,publisher:t.publisher,snippet:t.snippet,subtitle:t.subtitle,date:t.date})})}},{key:"handleSelectChange",value:function(){var e=Object(m.a)(d.a.mark(function e(t,a){var n,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,l=0;case 2:if(!(l<this.state.books.length)){e.next=13;break}if(this.state.books[l]._id!==a){e.next=10;break}return e.next=6,this.setActiveBook(a);case 6:return e.next=8,this.setState({activeBook:Object(i.a)({},this.state.activeBook,{status:n})});case 8:return e.next=10,this.updateBook(this.state.activeBook);case 10:l++,e.next=2;break;case 13:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleStatusFilterChange",value:function(e){this.setState({statusFilter:e}),this.filterBookList("status",e)}},{key:"handlePriorityFilterChange",value:function(e){this.setState({priorityFilter:e}),this.filterBookList("priority",e)}},{key:"handleLoginChange",value:function(e,t){this.setState({login:Object(i.a)({},this.state.login,Object(s.a)({},e,t))})}},{key:"handleLoginSubmit",value:function(e){var t=this,a=N.loginUrl,n=this.state.login.username,l=this.state.login.password,o=window.btoa(n+":"+l),r={headers:{Authorization:"Basic "+o}};E.a.get(a,r).then(function(e){var a=e.data,n={_id:a._id,username:a.username,email:a.email,role:a.role,authdata:o};localStorage.setItem("user",JSON.stringify(n)),t.setState({user:n,login:{username:"",password:""}}),t.getBookList()}).catch(function(e){t.setState({error:!0})})}},{key:"handleLogout",value:function(){this.setState({books:[],booksCache:[],activeBook:{_id:"",title:"",author:"",year:0,status:"none",priority:0,googleBooksId:"",userid:""},user:{_id:"",username:"",email:"",role:"",authdata:""}}),localStorage.removeItem("user")}},{key:"getAuth",value:function(){return{headers:{Authorization:"Basic "+this.state.user.authdata}}}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(S,{handleSearchClick:this.handleSearchClick,searchTerm:this.state.searchTerm,handleSearchChange:this.handleSearchChange,statusFilter:this.state.statusFilter,handleStatusFilterChange:this.handleStatusFilterChange,priorityFilter:this.state.priorityFilter,handlePriorityFilterChange:this.handlePriorityFilterChange,user:this.state.user,handleLogout:this.handleLogout}),l.a.createElement(j,{books:this.state.books,clickHandler:this.handleListItemClick,selectHandler:this.handleSelectChange,newHandler:this.handleNewClick}),l.a.createElement(x,{book:this.state.activeBook,handleChange:this.handleEditModalChange,handleSave:this.handleEditModalSave,mode:this.state.modalMode,googleBooksData:this.state.googleBooksData,handleGoogleLookup:this.handleGoogleLookup,handleGoogleBookSelect:this.handleGoogleBookSelect}),l.a.createElement(F,{msg:this.state.yesNoModal.text+this.state.activeBook.title+"?",handleOkClick:this.deleteActiveBook}),l.a.createElement(I,{login:this.state.login,handleChange:this.handleLoginChange,handleSubmit:this.handleLoginSubmit}),l.a.createElement("footer",null,l.a.createElement("p",null),l.a.createElement("p",null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.b6579671.chunk.js.map